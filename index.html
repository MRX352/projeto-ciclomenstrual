<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo do Ciclo Menstrual</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .pie-chart-container {
            position: relative; width: 300px; height: 300px; border-radius: 50%;
            background-image: conic-gradient(#fda4af 0deg 64deg, #f9a8d4 64deg 167deg, #f0abfc 167deg 180deg, #a5b4fc 180deg 360deg);
            cursor: pointer; transition: transform 0.3s ease;
        }
        .pie-chart-container:hover { transform: scale(1.05); }
        .pie-center {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 70%; height: 70%; background-color: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; text-align: center;
            padding: 10px; pointer-events: none;
        }
        .phase-card.active { box-shadow: 0 0 15px rgba(165, 180, 252, 0.8); border-color: #a5b4fc; }
        .hormone-line { transition: opacity 0.3s ease, stroke-width 0.2s ease; }
        .hormone-line.hidden { opacity: 0; }
        .day-marker { transition: transform 0.1s linear; }
        .legend-item.hidden { opacity: 0.5; text-decoration: line-through; }
        .follower-dot { transition: transform 0.1s linear, opacity 0.3s ease; }
        .follower-dot.hidden { opacity: 0; }
        #tooltip {
            transition: opacity 0.2s ease, transform 0.2s ease;
            transform: translate(-50%, -110%); pointer-events: none;
        }
        /* Estilos para o visualizador 3D */
        model-viewer {
            width: 100%; height: 400px; border-radius: 0.5rem;
            background-color: #f3f4f6;
        }
        /* Estilos para os botões de seleção de molécula */
        .molecule-btn {
            transition: all 0.2s ease-in-out;
        }
        .molecule-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-pink-500">O Ciclo Menstrual</h1>
            <p class="text-lg text-gray-600 mt-2">Um guia interativo para entender seu corpo.</p>
        </header>

        <section class="flex flex-col md:flex-row gap-8 items-center justify-center mb-12">
            <div class="flex flex-col items-center">
                <!-- Botões das fases agora são apenas indicadores visuais, não clicáveis -->
                <div id="cyclePhaseSelector" class="flex flex-wrap gap-4 justify-center mb-6">
                    <button disabled tabindex="-1" class="phase-btn px-4 py-2 rounded-lg font-semibold border border-red-200 bg-red-100 text-red-400 cursor-default opacity-70 select-none">Menstrual</button>
                    <button disabled tabindex="-1" class="phase-btn px-4 py-2 rounded-lg font-semibold border border-pink-200 bg-pink-100 text-pink-400 cursor-default opacity-70 select-none">Folicular</button>
                    <button disabled tabindex="-1" class="phase-btn px-4 py-2 rounded-lg font-semibold border border-purple-200 bg-purple-100 text-purple-400 cursor-default opacity-70 select-none">Ovulatória</button>
                    <button disabled tabindex="-1" class="phase-btn px-4 py-2 rounded-lg font-semibold border border-indigo-200 bg-indigo-100 text-indigo-400 cursor-default opacity-70 select-none">Lútea</button>
                </div>
                <div class="flex flex-wrap justify-center gap-4 mt-2 text-sm">
                    <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-red-300 mr-2"></span>Menstrual</div>
                    <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-pink-300 mr-2"></span>Folicular</div>
                    <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-purple-300 mr-2"></span>Ovulatória</div>
                    <div class="flex items-center"><span class="w-3 h-3 rounded-full bg-indigo-300 mr-2"></span>Lútea</div>
                </div>
            </div>
            <div id="infoPanel" class="w-full md:w-1/2 lg:w-2/5 p-6 bg-white rounded-2xl shadow-md transition-all duration-300 text-center"></div>
        </section>
        
        <section id="charts" class="bg-white p-6 rounded-2xl shadow-md mb-8">
            <h2 class="text-2xl font-bold text-center mb-2 text-indigo-500">Visualizações do Ciclo</h2>
            <p class="text-center text-gray-500 mb-6">Passe o mouse sobre os gráficos ou use o controle deslizante para explorar.</p>
            
            <div class="flex flex-col items-center mb-4">
                <label for="daySlider" class="font-semibold mb-2">Dia do Ciclo: <span id="dayLabel" class="text-indigo-500 font-bold">1</span></label>
                <input id="daySlider" type="range" min="1" max="28" value="1" class="w-full max-w-lg">
            </div>

            <!-- Alterado: gráficos agora ficam um embaixo do outro -->
            <div class="flex flex-col gap-12 items-center">
                <div class="w-full">
                    <h3 class="text-lg font-semibold text-center text-gray-700 mb-2">Flutuações Hormonais</h3>
                    <div class="relative">
                        <svg id="hormoneChart" viewBox="0 0 800 400" class="w-full bg-gray-50 rounded-lg cursor-crosshair"></svg>
                        <div id="tooltip" class="absolute bg-black bg-opacity-75 text-white p-3 rounded-lg text-sm w-64 opacity-0"></div>
                    </div>
                    <div id="chartLegend" class="flex flex-wrap justify-center gap-x-6 gap-y-2 mt-4"></div>
                </div>

                <div class="w-full">
                    <h3 class="text-lg font-semibold text-center text-gray-700 mb-2">Espessura do Endométrio</h3>
                    <div class="relative">
                        <svg id="endometriumChart" viewBox="0 0 800 400" class="w-full bg-gray-50 rounded-lg cursor-crosshair"></svg>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-4">O revestimento uterino engrossa para uma possível gravidez e descama se ela não ocorre.</p>
                </div>
            </div>
        </section>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONSTANTES E DADOS ---
            const cycleData = {};
            const dailyInsights = [
                "O ciclo começa! Menstruação e renovação.",
                "Fluxo menstrual pode estar intenso.",
                "Hormônios ainda baixos, energia pode oscilar.",
                "Menstruação diminuindo, folículos crescendo.",
                "Fim da menstruação para a maioria.",
                "Estrogênio começa a subir.",
                "Disposição e humor melhoram.",
                "Endométrio engrossando, energia em alta.",
                "Aproximação da ovulação.",
                "Estrogênio em alta, libido pode aumentar.",
                "Corpo se prepara para ovular.",
                "Pico de estrogênio, muco cervical fértil.",
                "Ovulação se aproxima.",
                "Ovulação! Óvulo liberado.",
                "Início da fase lútea.",
                "Progesterona sobe, temperatura basal aumenta.",
                "Endométrio atinge espessura máxima.",
                "Sintomas de TPM podem aparecer.",
                "Se não houve fecundação, hormônios caem.",
                "Corpo lúteo se desfaz.",
                "Possível inchaço e sensibilidade.",
                "Hormônios em queda.",
                "Preparação para nova menstruação.",
                "Sintomas pré-menstruais comuns.",
                "Menstruação prestes a começar.",
                "Ciclo se reinicia em breve.",
                "Últimos ajustes hormonais.",
                "Novo ciclo à vista."
            ];
            const hormones = {};
            const endometriumData = [2, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 14, 14, 13.5, 13, 13, 12.5, 12, 11, 10, 8, 6, 4, 3, 2.5];

            // --- ELEMENTOS DO DOM ---
            const infoPanel = document.getElementById('infoPanel');
            const centerText = document.getElementById('centerText');
            const cycleDiagram = document.getElementById('cycleDiagram');
            const daySlider = document.getElementById('daySlider');
            const dayLabel = document.getElementById('dayLabel');
            const svgHormone = document.getElementById('hormoneChart');
            const svgEndometrium = document.getElementById('endometriumChart');
            const legendContainer = document.getElementById('chartLegend');
            const tooltip = document.getElementById('tooltip');
            const svgNS = "http://www.w3.org/2000/svg";

            // --- VARIÁVEIS DE CONFIGURAÇÃO DOS GRÁFICOS ---
            const width = 800;
            const height = 400;
            const padding = 60;
            const dayWidth = (width - 2 * padding) / 27;

            // --- FUNÇÕES DE DESENHO E ATUALIZAÇÃO ---

            // Spline para suavizar linhas
            function getSplinePath(points, tension = 0.2) {
                if (points.length < 2) return '';
                let d = `M ${points[0].x},${points[0].y}`;
                for (let i = 0; i < points.length - 1; i++) {
                    const p0 = points[i];
                    const p1 = points[i + 1];
                    const cp1x = p0.x + (p1.x - p0.x) * tension;
                    const cp1y = p0.y;
                    const cp2x = p1.x - (p1.x - p0.x) * tension;
                    const cp2y = p1.y;
                    d += ` C ${cp1x},${cp1y} ${cp2x},${cp2y} ${p1.x},${p1.y}`;
                }
                return d;
            }

            function drawHormoneChart() {
                // Limpa SVG
                while (svgHormone.firstChild) svgHormone.removeChild(svgHormone.firstChild);

                // Eixos
                const yMax = 400;
                const yMin = 0;
                const chartHeight = height - padding * 1.5;

                // Eixo X
                const xAxis = document.createElementNS(svgNS, 'line');
                xAxis.setAttribute('x1', padding); xAxis.setAttribute('y1', height - padding);
                xAxis.setAttribute('x2', width - padding); xAxis.setAttribute('y2', height - padding);
                xAxis.setAttribute('stroke', '#9ca3af');
                svgHormone.appendChild(xAxis);

                // Eixo Y
                const yAxis = document.createElementNS(svgNS, 'line');
                yAxis.setAttribute('x1', padding); yAxis.setAttribute('y1', padding / 2);
                yAxis.setAttribute('x2', padding); yAxis.setAttribute('y2', height - padding);
                yAxis.setAttribute('stroke', '#9ca3af');
                svgHormone.appendChild(yAxis);

                // Labels dos eixos
                for (let i = 1; i <= 28; i += 3) {
                    const x = padding + (i - 1) * dayWidth;
                    const text = document.createElementNS(svgNS, 'text');
                    text.setAttribute('x', x);
                    text.setAttribute('y', height - padding + 20);
                    text.setAttribute('font-size', '12');
                    text.setAttribute('fill', '#6b7281');
                    text.setAttribute('text-anchor', 'middle');
                    text.textContent = i;
                    svgHormone.appendChild(text);
                }
                for (let i = 0; i <= 400; i += 100) {
                    const y = (height - padding) - (i / 400) * chartHeight;
                    const text = document.createElementNS(svgNS, 'text');
                    text.setAttribute('x', padding - 8);
                    text.setAttribute('y', y + 4);
                    text.setAttribute('font-size', '12');
                    text.setAttribute('fill', '#6b7281');
                    text.setAttribute('text-anchor', 'end');
                    text.textContent = i;
                    svgHormone.appendChild(text);
                }

                // Desenha linhas dos hormônios
                Object.keys(hormones).forEach(key => {
                    const hormone = hormones[key];
                    const max = key === 'estrogen' ? 400 : key === 'progesterone' ? 14 : 70;
                    const points = hormone.data.map((val, idx) => ({
                        x: padding + idx * dayWidth,
                        y: (height - padding) - (val / max) * chartHeight
                    }));
                    const path = document.createElementNS(svgNS, 'path');
                    path.setAttribute('d', getSplinePath(points));
                    path.setAttribute('fill', 'none');
                    path.setAttribute('stroke', hormone.color);
                    path.setAttribute('stroke-width', '3');
                    path.setAttribute('class', `hormone-line hormone-${key}`);
                    svgHormone.appendChild(path);
                });

                // Marcador vertical
                const marker = document.createElementNS(svgNS, 'line');
                marker.setAttribute('id', 'hormoneMarker');
                marker.setAttribute('y1', padding / 2);
                marker.setAttribute('y2', height - padding);
                marker.setAttribute('stroke', '#374151');
                marker.setAttribute('stroke-width', '1.5');
                marker.setAttribute('stroke-dasharray', '4');
                svgHormone.appendChild(marker);
            }

            function drawEndometriumChart() {
                // Limpa SVG antes de desenhar
                while (svgEndometrium.firstChild) svgEndometrium.removeChild(svgEndometrium.firstChild);

                const maxThickness = 16;
                const chartDrawableHeight = height - padding * 1.5;

                // Eixo X e Y
                const xAxis = document.createElementNS(svgNS, 'line');
                xAxis.setAttribute('x1', padding); xAxis.setAttribute('y1', height - padding);
                xAxis.setAttribute('x2', width - padding); xAxis.setAttribute('y2', height - padding);
                xAxis.setAttribute('stroke', '#9ca3af'); svgEndometrium.appendChild(xAxis);

                const yAxis = document.createElementNS(svgNS, 'line');
                yAxis.setAttribute('x1', padding); yAxis.setAttribute('y1', padding / 2);
                yAxis.setAttribute('x2', padding); yAxis.setAttribute('y2', height - padding);
                yAxis.setAttribute('stroke', '#9ca3af'); svgEndometrium.appendChild(yAxis);

                // Labels dos eixos
                for (let i = 1; i <= 28; i += 3) {
                    const x = padding + (i - 1) * dayWidth;
                    const text = document.createElementNS(svgNS, 'text');
                    text.setAttribute('x', x);
                    text.setAttribute('y', height - padding + 20);
                    text.setAttribute('font-size', '12');
                    text.setAttribute('fill', '#6b7281');
                    text.setAttribute('text-anchor', 'middle');
                    text.textContent = i;
                    svgEndometrium.appendChild(text);
                }
                for (let i = 0; i <= maxThickness; i += 4) {
                    const y = (height - padding) - (i / maxThickness) * chartDrawableHeight;
                    const text = document.createElementNS(svgNS, 'text');
                    text.setAttribute('x', padding - 8); text.setAttribute('y', y + 4);
                    text.setAttribute('font-size', '12'); text.setAttribute('fill', '#6b7281');
                    text.setAttribute('text-anchor', 'end'); text.textContent = `${i} mm`;
                    svgEndometrium.appendChild(text);
                }

                // Desenhar área do endométrio
                const points = endometriumData.map((point, index) => ({
                    x: padding + index * dayWidth,
                    y: (height - padding) - (point / maxThickness) * chartDrawableHeight
                }));

                const pathArea = document.createElementNS(svgNS, 'path');
                const pathData = getSplinePath(points) + ` L ${width - padding},${height - padding} L ${padding},${height - padding} Z`;
                pathArea.setAttribute('d', pathData);
                pathArea.setAttribute('fill', 'url(#gradientEndo)');
                pathArea.setAttribute('stroke', '#c084fc');
                pathArea.setAttribute('stroke-width', '2');

                const defs = document.createElementNS(svgNS, 'defs');
                const gradient = document.createElementNS(svgNS, 'linearGradient');
                gradient.setAttribute('id', 'gradientEndo');
                gradient.setAttribute('x1', '0%'); gradient.setAttribute('y1', '0%');
                gradient.setAttribute('x2', '0%'); gradient.setAttribute('y2', '100%');
                gradient.innerHTML = `
                    <stop offset="0%" style="stop-color:#d8b4fe; stop-opacity:0.6" />
                    <stop offset="100%" style="stop-color:#e9d5ff; stop-opacity:0.2" />`;
                defs.appendChild(gradient);
                svgEndometrium.appendChild(defs);
                svgEndometrium.appendChild(pathArea);

                // Marcador e Texto
                const marker = document.createElementNS(svgNS, 'line');
                marker.setAttribute('id', 'endometriumMarker'); marker.setAttribute('y1', padding/2);
                marker.setAttribute('y2', height - padding); marker.setAttribute('stroke', '#374151');
                marker.setAttribute('stroke-width', '1.5'); marker.setAttribute('stroke-dasharray', '4');
                svgEndometrium.appendChild(marker);

                const thicknessText = document.createElementNS(svgNS, 'text');
                thicknessText.setAttribute('id', 'thicknessText');
                thicknessText.setAttribute('x', padding + 10); thicknessText.setAttribute('y', padding - 5);
                thicknessText.setAttribute('font-size', '14'); thicknessText.setAttribute('font-weight', '600');
                thicknessText.setAttribute('fill', '#8b5cf6');
                svgEndometrium.appendChild(thicknessText);
            }

            function drawHormoneLegend() {
                legendContainer.innerHTML = '';
                Object.keys(hormones).forEach(key => {
                    const hormone = hormones[key];
                    const item = document.createElement('div');
                    item.className = 'legend-item flex items-center gap-2';
                    item.innerHTML = `<span class="w-4 h-4 rounded-full" style="background:${hormone.color}"></span>${hormone.name}`;
                    legendContainer.appendChild(item);
                });
            }

            function updateMarkersAndDots(day) {
                // Hormônio
                const marker = document.getElementById('hormoneMarker');
                const x = padding + (day - 1) * dayWidth;
                marker.setAttribute('transform', `translate(${x}, 0)`);
            }

            function updateEndometriumMarker(day) {
                const maxThickness = 16;
                const chartDrawableHeight = height - padding * 1.5;
                const x = padding + (day - 1) * dayWidth;

                const marker = document.getElementById('endometriumMarker');
                if (marker) marker.setAttribute('transform', `translate(${x}, 0)`);

                const text = document.getElementById('thicknessText');
                const thickness = endometriumData[day - 1] ?? endometriumData[0];
                if (text) text.textContent = `Espessura: ${thickness.toFixed(1)} mm`;
            }

            function updateTooltip(day, event) {
                if (!event) {
                    tooltip.style.opacity = 0;
                    return;
                }
                let html = `<div class="font-semibold mb-1">Dia ${day}</div>`;
                Object.keys(hormones).forEach(key => {
                    const hormone = hormones[key];
                    html += `<div><span style="color:${hormone.color};font-weight:600">${hormone.name}:</span> ${hormone.data[day - 1]} ${hormone.unit}</div>`;
                });
                html += `<div class="mt-1 text-xs text-gray-200">${dailyInsights[day - 1] || ''}</div>`;
                tooltip.innerHTML = html;
                tooltip.style.opacity = 1;
                const svgRect = svgHormone.getBoundingClientRect();
                const tooltipWidth = tooltip.offsetWidth || 256;
                let left = (event.clientX - svgRect.left) - tooltipWidth / 2;
                left = Math.max(0, Math.min(left, svgRect.width - tooltipWidth));
                tooltip.style.left = `${left}px`;
                tooltip.style.top = `${event.clientY - svgRect.top - 10}px`;
            }

            function getPhaseKeyFromDay(day) {
                if (day >= cycleData.menstrual.startDay && day <= cycleData.menstrual.endDay) return 'menstrual';
                if (day >= cycleData.follicular.startDay && day <= cycleData.follicular.endDay) return 'follicular';
                if (day >= cycleData.ovulatory.startDay && day <= cycleData.ovulatory.endDay) return 'ovulatory';
                if (day >= cycleData.luteal.startDay && day <= cycleData.luteal.endDay) return 'luteal';
                return 'menstrual';
            }

            function updateInfoPanel(phaseKey) {
                const phase = cycleData[phaseKey];
                if (!phase) return;
                infoPanel.innerHTML = `
                    <div class="phase-card border-2 rounded-xl p-4 ${phase.borderColor} ${phase.bgColor}">
                        <h3 class="text-xl font-bold mb-2 ${phase.textColor}">${phase.name}</h3>
                        <div class="text-sm mb-2"><span class="font-semibold">Duração:</span> ${phase.duration}</div>
                        <div class="mb-2">${phase.description}</div>
                        <ul class="text-sm mb-2">
                            <li><span class="font-semibold">Útero:</span> ${phase.uterus}</li>
                            <li><span class="font-semibold">Ovários:</span> ${phase.ovaries}</li>
                            <li><span class="font-semibold">Sintomas:</span> ${phase.symptoms}</li>
                        </ul>
                    </div>
                `;
            }

            function updateDiagramAndPanel(phaseKey, updateSlider = false) {
                // Atualiza o diagrama central
                const phase = cycleData[phaseKey];
                if (!phase) return;
                centerText.textContent = phase.name;
                // Atualiza painel lateral
                updateInfoPanel(phaseKey);
                // Destaca fase no diagrama (opcional: pode adicionar classe CSS)
            }

            // Função central de sincronização ATUALIZADA
            function syncUIToDay(day, event = null) {
                day = Math.max(1, Math.min(28, day));
                daySlider.value = day;
                dayLabel.textContent = day;

                // Atualiza todos os elementos visuais
                updateMarkersAndDots(day);
                updateEndometriumMarker(day);

                const currentPhaseKey = getPhaseKeyFromDay(day);
                updateInfoPanel(currentPhaseKey);

                if (event && event.target.closest('#hormoneChart')) {
                    updateTooltip(day, event);
                } else {
                    tooltip.style.opacity = 0;
                }
            }

            // --- EVENT LISTENERS ---

            daySlider.addEventListener('input', (e) => syncUIToDay(parseInt(e.target.value)));
            svgHormone.addEventListener('mousemove', (e) => {
                const svgRect = svgHormone.getBoundingClientRect();
                const mouseX = e.clientX - svgRect.left;
                const day = Math.max(1, Math.min(28, Math.round((mouseX - padding) / dayWidth) + 1));
                syncUIToDay(day, e);
            });
            svgHormone.addEventListener('mouseleave', () => { tooltip.style.opacity = 0; });
            svgEndometrium.addEventListener('mousemove', (e) => {
                const svgRect = svgEndometrium.getBoundingClientRect();
                const mouseX = e.clientX - svgRect.left;
                const day = Math.max(1, Math.min(28, Math.round((mouseX - padding) / dayWidth) + 1));
                syncUIToDay(day, e);
            });
            svgEndometrium.addEventListener('mouseleave', () => { tooltip.style.opacity = 0; });

            // --- INICIALIZAÇÃO ---
            function initialize() {
                cycleData.menstrual = { name: 'Fase Menstrual', startDay: 1, endDay: 5, duration: 'Dia 1-5 (aprox.)', color: '#fda4af', lightColor: '#fee2e2', borderColor: 'border-red-300', bgColor: 'bg-red-50', textColor: 'text-red-600', description: 'O ciclo começa com a menstruação. Como a gravidez não ocorreu, os níveis de estrogênio e progesterona caem, fazendo com que o revestimento do útero (endométrio) seja eliminado.', uterus: 'O endométrio é expelido do corpo, resultando no sangramento menstrual.', ovaries: 'Os folículos, pequenos sacos que contêm óvulos, começam a se desenvolver.', symptoms: 'Cólicas, inchaço, fadiga, sensibilidade nos seios, alterações de humor.' };
                cycleData.follicular = { name: 'Fase Folicular', startDay: 1, endDay: 13, duration: 'Dia 1-13 (aprox.)', color: '#f9a8d4', lightColor: '#fce7f3', borderColor: 'border-pink-300', bgColor: 'bg-pink-50', textColor: 'text-pink-600', description: 'Esta fase sobrepõe a menstrual e termina com a ovulação. O cérebro libera o Hormônio Folículo-Estimulante (FSH), que estimula os ovários a produzir folículos. Um folículo se torna dominante e amadurece um óvulo.', uterus: 'O endométrio começa a engrossar novamente, preparando-se para uma possível gravidez.', ovaries: 'Um folículo dominante cresce e produz estrogênio.', symptoms: 'Aumento de energia, melhora do humor, aumento da libido à medida que a ovulação se aproxima.' };
                cycleData.ovulatory = { name: 'Fase Ovulatória', startDay: 14, endDay: 14, duration: 'Dia 14 (aprox.)', color: '#f0abfc', lightColor: '#fae8ff', borderColor: 'border-purple-300', bgColor: 'bg-purple-50', textColor: 'text-purple-600', description: 'O aumento do estrogênio causa um pico súbito do Hormônio Luteinizante (LH), que desencadeia a ovulação. O ovário libera o óvulo maduro.', uterus: 'O endométrio está espesso e receptivo a um óvulo fertilizado.', ovaries: 'O folículo dominante se rompe e libera o óvulo na trompa de Falópio.', symptoms: 'Leve dor pélvica, aumento da temperatura corporal basal, muco cervical claro e elástico.' };
                cycleData.luteal = { name: 'Fase Lútea', startDay: 15, endDay: 28, duration: 'Dia 15-28 (aprox.)', color: '#a5b4fc', lightColor: '#e0e7ff', borderColor: 'border-indigo-300', bgColor: 'bg-indigo-50', textColor: 'text-indigo-600', description: 'Após a ovulação, o folículo rompido se transforma no corpo lúteo, que produz progesterona. A progesterona prepara o útero para a gravidez. Se a fertilização não ocorrer, o corpo lúteo se desintegra, os níveis hormonais caem e o ciclo recomeça.', uterus: 'O endométrio atinge sua espessura máxima e se prepara para a implantação.', ovaries: 'O corpo lúteo produz progesterona e um pouco de estrogênio.', symptoms: 'Sintomas da TPM (Tensão Pré-Menstrual) podem ocorrer, como irritabilidade, inchaço, acne, desejos alimentares.' };
                hormones.estrogen = { name: 'Estrogênio', color: '#ec4899', unit: 'pg/mL', data: [30,35,40,55,75,100,125,150,180,220,280,350,250,150,100,110,120,130,150,160,150,130,110,90,70,50,40,35] };
                hormones.progesterone = { name: 'Progesterona', color: '#8b5cf6', unit: 'ng/mL', data: [0.5,0.5,0.5,0.5,0.6,0.6,0.7,0.7,0.8,0.8,0.9,1.0,1.2,1.5,2.5,4.0,6.0,8.0,10.0,12.0,11.0,9.0,7.0,4.0,2.0,1.0,0.7,0.5] };
                hormones.lh = { name: 'LH', color: '#f59e0b', unit: 'mIU/mL', data: [5,5.2,5.5,6,6.5,7,7.5,8,9,10,12,20,60,15,8,7,6.5,6,5.5,5,4.5,4,3.5,3.5,4,4.5,5,5] };
                hormones.fsh = { name: 'FSH', color: '#10b981', unit: 'mIU/mL', data: [6,6.2,6.5,7,6.8,6.5,6,5.8,5.5,6,7,10,20,8,5,4.5,4,3.8,3.5,3.2,3,3.2,3.5,3.8,4,4.5,5,5.5] };

                drawHormoneChart();
                drawHormoneLegend();
                drawEndometriumChart();
                updateEndometriumMarker(1); // Garante marcador inicial
                updateDiagramAndPanel('menstrual');
                syncUIToDay(1);
                // makePhaseButtonsInteractive(); // Removido, pois os botões não são mais interativos
            }

            initialize();
        });
    </script>
</body>
</html>